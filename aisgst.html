<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>ğŸ¤– AI ë¡œë˜ ì¶”ì²œê¸°</title>

<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>

body{
    font-family:sans-serif;
    text-align:center;
    background:#f5f5f5;
    margin:0;
    padding-bottom:80px;
}

/* HEADER */
.header{
    background:#1976d2;
    color:white;
    padding:16px;
    font-size:18px;
    font-weight:bold;
}

/* ì»¨íŠ¸ë¡¤ */
select{
    padding:10px;
    border-radius:8px;
    font-size:16px;
    width:90%;
    max-width:300px;
    margin-top:15px;
}

/* ë²„íŠ¼ */
button{
    padding:12px 20px;
    margin:10px;
    border:none;
    border-radius:10px;
    background:#4CAF50;
    color:#fff;
    cursor:pointer;
    font-size:16px;
}

/* ë²ˆí˜¸ ì˜ì—­ â­ í•µì‹¬ */
#result{
    display:flex;
    flex-direction:column;   /* ì¤„ ë‹¨ìœ„ ë°°ì¹˜ */
    gap:15px;
    margin-top:25px;
    align-items:center;
}

/* í•œ ì¤„ ë²ˆí˜¸ */
.row{
    display:flex;
    flex-wrap:nowrap;
    gap:8px;
    overflow-x:auto;
    padding:5px;
}

/* ë²ˆí˜¸ ê³µ */
.ball{
    flex:0 0 auto;
    width:45px;
    height:45px;
    border-radius:50%;
    display:flex;
    justify-content:center;
    align-items:center;
    font-weight:bold;
    color:white;
    font-size:18px;
}

/* ì´ìœ  ì˜ì—­ */
.reason{
    margin-top:20px;
    padding:15px;
    background:white;
    border-radius:12px;
    width:90%;
    max-width:600px;
    margin-left:auto;
    margin-right:auto;
    font-size:15px;
}

/* í•˜ë‹¨ ë„¤ë¹„ */
.bottom-nav{
    position:fixed;
    bottom:0;
    width:100%;
    height:65px;
    background:white;
    display:flex;
    justify-content:space-around;
    align-items:center;
    box-shadow:0 -2px 8px rgba(0,0,0,0.1);
}

.bottom-nav a{
    text-decoration:none;
    color:#555;
    font-size:12px;
    text-align:center;
}

.bottom-nav a.active{
    color:#6200ea;
    font-weight:500;
}

</style>
</head>

<body>

<div class="header">ğŸ¤– AI ê°€ì¤‘ì¹˜ ë¡œë˜ ì¶”ì²œ</div>

<select id="mode">
<option value="random">ğŸ² ê¸°ë³¸ ëœë¤</option>
<option value="hot">ğŸ”¥ í•« ë²ˆí˜¸ ê°•í™”</option>
<option value="cold">â„ ì½œë“œ ë²ˆí˜¸ ë…¸ë¦¼</option>
<option value="ai">ğŸ¤– AI ê°€ì¤‘ì¹˜ ì¶”ì²œ</option>
</select>

<br>

<select id="lineCount">
<option value="1">1ì¤„ ìƒì„±</option>
<option value="2">2ì¤„ ìƒì„±</option>
<option value="3">3ì¤„ ìƒì„±</option>
<option value="4">4ì¤„ ìƒì„±</option>
<option value="5">5ì¤„ ìƒì„±</option>
</select>

<br>

<button onclick="generate()">ë²ˆí˜¸ ìƒì„±</button>

<div id="result"></div>
<div id="reason" class="reason"></div>

<!-- FOOTER = bottom nav -->
<div class="bottom-nav">
    <a href="index.html">ğŸ  ìƒì„±</a>
    <a href="winning.html">ğŸ† ë‹¹ì²¨</a>
    <a href="statistics.html">ğŸ“Š í†µê³„</a>
    <a href="aisgst.html" class="active">ğŸ¤– AI</a>
    <a href="dashboard.html">ğŸ“ˆ ëŒ€ì‹œë³´ë“œ</a>
</div>

<script>

let lottoData=[];

async function loadLotto(){
    const res=await fetch("./lotto_data.json");
    lottoData=await res.json();
}
loadLotto();

function getColor(num){
    if(num<=10) return "#fbc400";
    if(num<=20) return "#69c8f2";
    if(num<=30) return "#ff7272";
    if(num<=40) return "#aaa";
    return "#b0d840";
}

function calculateFrequency(lastN=100){
    let freq=Array(46).fill(0);

    let data=lottoData.slice(-lastN);

    data.forEach(draw=>{
        draw.numbers.forEach(n=>freq[n]++);
        freq[draw.bonus]+=0.5;
    });

    return freq;
}

function weightedPick(weights){
    let pool=[];
    for(let i=1;i<=45;i++){
        let w=Math.max(1,Math.floor(weights[i]));
        for(let j=0;j<w;j++){
            pool.push(i);
        }
    }
    return pool[Math.floor(Math.random()*pool.length)];
}

function generate(){

    if(lottoData.length===0){
        alert("ë°ì´í„° ë¡œë”© ì¤‘...");
        return;
    }

    let mode=document.getElementById("mode").value;
    let lineCount=parseInt(document.getElementById("lineCount").value);
    let freq=calculateFrequency(100);

    let reasonText="ğŸ“Š ì¶”ì²œ ì´ìœ :<br>";

    if(mode==="random"){
        reasonText+="ì™„ì „ ë¬´ì‘ìœ„ ê· í˜• ì¡°í•©ì…ë‹ˆë‹¤.";
    }
    if(mode==="hot"){
        reasonText+="ìµœê·¼ 100íšŒì—ì„œ ìì£¼ ë“±ì¥í•œ ë²ˆí˜¸ë¥¼ ê°•í™”í–ˆìŠµë‹ˆë‹¤.";
    }
    if(mode==="cold"){
        reasonText+="ìµœê·¼ ì¶œí˜„ì´ ì ì€ ë²ˆí˜¸ ìœ„ì£¼ë¡œ êµ¬ì„±í–ˆìŠµë‹ˆë‹¤.";
    }
    if(mode==="ai"){
        reasonText+="ìµœê·¼ í†µê³„ + ëœë¤ íŠ¸ë Œë“œ ê°€ì¤‘ì¹˜ë¥¼ í˜¼í•©í•œ AI ë¶„ì„ ì¡°í•©ì…ë‹ˆë‹¤.";
    }

    let resultHTML="";

    for(let line=0; line<lineCount; line++){

        let selected=[];

        while(selected.length<6){

            let num;

            if(mode==="random"){
                num=Math.floor(Math.random()*45)+1;
            }
            else if(mode==="hot"){
                num=weightedPick(freq);
            }
            else if(mode==="cold"){
                let maxFreq=Math.max(...freq);
                let inverted=freq.map(f=>maxFreq-f+1);
                num=weightedPick(inverted);
            }
            else if(mode==="ai"){
                let aiWeights=freq.map(f=>{
                    let trend=Math.random()*2;
                    return f*1.2 + trend;
                });
                num=weightedPick(aiWeights);
            }

            if(!selected.includes(num)){
                selected.push(num);
            }
        }

        selected.sort((a,b)=>a-b);

        resultHTML+=
        `<div class="row">
            ${selected.map(n=>
                `<div class="ball" style="background:${getColor(n)}">${n}</div>`
            ).join("")}
        </div>`;
    }

    document.getElementById("result").innerHTML=resultHTML;
    document.getElementById("reason").innerHTML=reasonText;
}

</script>

</body>
</html>
