<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>ğŸ¤– AI ë¡œë˜ ì¶”ì²œê¸°</title>
<style>
body{font-family:sans-serif;text-align:center;background:#f5f5f5}
button{padding:10px 20px;margin:5px;border:none;border-radius:8px;background:#4CAF50;color:#fff;cursor:pointer}
select{padding:8px;border-radius:8px}
.ball{
    display:inline-flex;
    width:45px;height:45px;
    border-radius:50%;
    justify-content:center;
    align-items:center;
    font-weight:bold;
    color:#fff;
    margin:5px;
    font-size:18px;
}
.reason{
    margin-top:15px;
    padding:10px;
    background:#fff;
    border-radius:10px;
    width:80%;
    margin-left:auto;
    margin-right:auto;
}
</style>
</head>
<body>

<h2>ğŸ¤– AI ê°€ì¤‘ì¹˜ ë¡œë˜ ì¶”ì²œ</h2>

<select id="mode">
<option value="random">ğŸ² ê¸°ë³¸ ëœë¤</option>
<option value="hot">ğŸ”¥ í•« ë²ˆí˜¸ ê°•í™”</option>
<option value="cold">â„ ì½œë“œ ë²ˆí˜¸ ë…¸ë¦¼</option>
<option value="ai">ğŸ¤– AI ê°€ì¤‘ì¹˜ ì¶”ì²œ</option>
</select>

<br><br>
<button onclick="generate()">ë²ˆí˜¸ ìƒì„±</button>

<div id="result"></div>
<div id="reason" class="reason"></div>
    
<div class="footer">
Â© 2026 Luckyty | í†µê³„ ê¸°ë°˜ ë¡œë˜ ë¶„ì„
</div>
<script>

let lottoData=[];

async function loadLotto(){
    const res=await fetch("./lotto_data.json");
    lottoData=await res.json();
}
loadLotto();

function getColor(num){
    if(num<=10) return "#fbc400";
    if(num<=20) return "#69c8f2";
    if(num<=30) return "#ff7272";
    if(num<=40) return "#aaa";
    return "#b0d840";
}

function calculateFrequency(lastN=100){
    let freq=Array(46).fill(0);

    let data=lottoData.slice(-lastN);

    data.forEach(draw=>{
        draw.numbers.forEach(n=>freq[n]++);
        freq[draw.bonus]+=0.5; // ë³´ë„ˆìŠ¤ ì•½í•œ ê°€ì¤‘ì¹˜
    });

    return freq;
}

function weightedPick(weights){
    let pool=[];
    for(let i=1;i<=45;i++){
        let w=Math.max(1,Math.floor(weights[i]));
        for(let j=0;j<w;j++){
            pool.push(i);
        }
    }
    return pool[Math.floor(Math.random()*pool.length)];
}

function generate(){

    if(lottoData.length===0){
        alert("ë°ì´í„° ë¡œë”© ì¤‘...");
        return;
    }

    let mode=document.getElementById("mode").value;
    let freq=calculateFrequency(100);
    let selected=[];
    let reasonText="";

    while(selected.length<6){

        let num;

        if(mode==="random"){
            num=Math.floor(Math.random()*45)+1;
        }

        else if(mode==="hot"){
            num=weightedPick(freq);
        }

        else if(mode==="cold"){
            let inverted=freq.map(f=>Math.max(...freq)-f+1);
            num=weightedPick(inverted);
        }

        else if(mode==="ai"){
            let aiWeights=freq.map((f,i)=>{
                let trend=Math.random()*2;
                return f*1.2 + trend;
            });
            num=weightedPick(aiWeights);
        }

        if(!selected.includes(num)){
            selected.push(num);
        }
    }

    selected.sort((a,b)=>a-b);

    document.getElementById("result").innerHTML=
        selected.map(n=>`<div class="ball" style="background:${getColor(n)}">${n}</div>`).join("");

    // ì¶”ì²œ ì´ìœ  ìƒì„±
    let hotNum=selected.filter(n=>freq[n]>10);
    let coldNum=selected.filter(n=>freq[n]<5);

    reasonText="ğŸ“Š ì¶”ì²œ ì´ìœ :<br>";

    if(mode==="random"){
        reasonText+="ì™„ì „ ë¬´ì‘ìœ„ ê· í˜• ì¡°í•©ì…ë‹ˆë‹¤.";
    }
    if(mode==="hot"){
        reasonText+="ìµœê·¼ 100íšŒì—ì„œ ìì£¼ ë“±ì¥í•œ ë²ˆí˜¸ë¥¼ ê°•í™”í–ˆìŠµë‹ˆë‹¤.";
    }
    if(mode==="cold"){
        reasonText+="ìµœê·¼ ì¶œí˜„ì´ ì ì€ ë²ˆí˜¸ ìœ„ì£¼ë¡œ êµ¬ì„±í–ˆìŠµë‹ˆë‹¤.";
    }
    if(mode==="ai"){
        reasonText+="ìµœê·¼ í†µê³„ + ëœë¤ íŠ¸ë Œë“œ ê°€ì¤‘ì¹˜ë¥¼ í˜¼í•©í•œ AI ë¶„ì„ ì¡°í•©ì…ë‹ˆë‹¤.";
    }

    if(hotNum.length>0){
        reasonText+=`<br>ğŸ”¥ ê°•ì„¸ ë²ˆí˜¸ í¬í•¨: ${hotNum.join(", ")}`;
    }

    if(coldNum.length>0){
        reasonText+=`<br>â„ ì €ì¶œí˜„ ë²ˆí˜¸ í¬í•¨: ${coldNum.join(", ")}`;
    }

    document.getElementById("reason").innerHTML=reasonText;
}

</script>

</body>
</html>
