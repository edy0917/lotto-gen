<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>ë¡œë˜ ì¶”ì²œê¸°</title>
<link rel="manifest" href="manifest.json">
<link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&display=swap" rel="stylesheet">

<style>
body{
    margin:0;
    font-family:'Roboto', sans-serif;
    background:#f1f3f4;
}

/* ìƒë‹¨ ì•±ë°” */
.appbar{
    position:fixed;
    top:0;
    width:100%;
    height:56px;
    background:#6200ea;
    color:white;
    display:flex;
    align-items:center;
    justify-content:center;
    font-size:18px;
    font-weight:500;
    box-shadow:0 2px 6px rgba(0,0,0,0.3);
    z-index:1000;
}

.content{
    padding:80px 16px 100px;
    max-width:700px;
    margin:auto;
}

.card{
    background:white;
    padding:20px;
    border-radius:16px;
    box-shadow:0 4px 12px rgba(0,0,0,0.1);
    margin-bottom:20px;
}

h3{
    margin-top:20px;
}

input{
    padding:10px;
    margin:6px 0;
    border-radius:8px;
    border:1px solid #ddd;
    width:100%;
    box-sizing:border-box;
}

.btn{
    background:#6200ea;
    color:white;
    border:none;
    padding:14px;
    width:100%;
    border-radius:12px;
    font-size:16px;
    margin-top:15px;
    cursor:pointer;
}

.result{
    text-align:center;
    margin-top:20px;
}

/* ë¡œë˜ ê³µ */
.ball{
    display:inline-flex;
    justify-content:center;
    align-items:center;
    width:46px;
    height:46px;
    border-radius:50%;
    margin:6px;
    font-weight:bold;
    color:white;
    font-size:17px;
    box-shadow: inset -4px -4px 8px rgba(0,0,0,0.2),
                inset 4px 4px 8px rgba(255,255,255,0.4);
}

.yellow{ background:#fbc400; }
.blue{ background:#69c8f2; }
.red{ background:#ff7272; }
.gray{ background:#aaaaaa; }
.green{ background:#b0d840; }

/* ê³ ê¸‰ ì„¤ì • ì ‘ê¸° */
.accordion{
    background:#eee;
    padding:12px;
    border-radius:10px;
    cursor:pointer;
    font-weight:500;
    margin-top:20px;
}

.panel{
    display:none;
    padding-top:10px;
}

/* í•˜ë‹¨ ë„¤ë¹„ */
.bottom-nav{
    position:fixed;
    bottom:0;
    width:100%;
    height:65px;
    background:white;
    display:flex;
    justify-content:space-around;
    align-items:center;
    box-shadow:0 -2px 8px rgba(0,0,0,0.1);
}

.bottom-nav a{
    text-decoration:none;
    color:#555;
    font-size:12px;
    text-align:center;
}

.bottom-nav a.active{
    color:#6200ea;
    font-weight:500;
}
</style>
</head>

<body>

<div class="appbar">ğŸ¯ ë¡œë˜ ì¶”ì²œê¸°</div>

<div class="content">
<div class="card">

<h3>í¬í•¨ ë²ˆí˜¸ (ì‰¼í‘œ)</h3>
<input type="text" id="includeNums" placeholder="1,5,7">

<h3>ì œì™¸ ë²ˆí˜¸</h3>
<input type="text" id="excludeNums" placeholder="2,3">

<h3>ì¶”ì²œ ì¤„ ìˆ˜ (ìµœëŒ€ 5)</h3>
<input type="number" id="lineCount" value="1" min="1" max="5">

<div class="accordion" onclick="togglePanel()">âš™ ê³ ê¸‰ ì„¤ì • ì—´ê¸°</div>

<div class="panel" id="advancedPanel">

<h3>ë²ˆí˜¸ëŒ€ë³„ ìµœì†Œ ê°œìˆ˜</h3>
1~9 <input type="number" id="band1" value="0">
10~19 <input type="number" id="band2" value="0">
20~29 <input type="number" id="band3" value="0">
30~39 <input type="number" id="band4" value="0">
40~45 <input type="number" id="band5" value="0">

<h3>í¬ê·€ íŒ¨í„´</h3>
<label><input type="checkbox" id="rare"> í™œì„±í™”</label>

</div>

<button class="btn" onclick="generate()">ë²ˆí˜¸ ìƒì„±</button>

<div id="result" class="result"></div>

</div>
</div>
<a href="privacy.html">ğŸ”’ ì •ì±…</a>
<div class="bottom-nav">
    <a href="index.html" class="active">ğŸ  ìƒì„±</a>
    <a href="winning.html">ğŸ† ë‹¹ì²¨</a>
    <a href="statistics.html">ğŸ“Š í†µê³„</a>
    <a href="aisgst.html">ğŸ¤– AI</a>
    <a href="dashboard.html">ğŸ“ˆ ëŒ€ì‹œë³´ë“œ</a>
</div>

<script>

function togglePanel(){
    let panel=document.getElementById("advancedPanel");
    panel.style.display = panel.style.display==="block" ? "none" : "block";
}

function getColorClass(num){
    if(num<=9) return "yellow";
    if(num<=19) return "blue";
    if(num<=29) return "red";
    if(num<=39) return "gray";
    return "green";
}

function parseInput(id){
    let val=document.getElementById(id).value;
    if(!val) return [];
    return val.split(",")
        .map(x=>parseInt(x.trim()))
        .filter(x=>!isNaN(x) && x>=1 && x<=45);
}

function generate(){

    let include=parseInput("includeNums");
    let exclude=parseInput("excludeNums");
    let rare=document.getElementById("rare").checked;
    let lineCount=parseInt(document.getElementById("lineCount").value)||1;
    if(lineCount>5) lineCount=5;

    let bands=[
        {start:1,end:9,count:parseInt(document.getElementById("band1").value)||0},
        {start:10,end:19,count:parseInt(document.getElementById("band2").value)||0},
        {start:20,end:29,count:parseInt(document.getElementById("band3").value)||0},
        {start:30,end:39,count:parseInt(document.getElementById("band4").value)||0},
        {start:40,end:45,count:parseInt(document.getElementById("band5").value)||0}
    ];

    let minSum = bands.reduce((sum,b)=>sum+b.count,0);
    if(minSum > 6){
        alert("ë²ˆí˜¸ëŒ€ ìµœì†Œ ê°œìˆ˜ í•©ì´ 6ì„ ì´ˆê³¼í–ˆìŠµë‹ˆë‹¤.");
        return;
    }

    function validate(arr){
        for(let n of include){ if(!arr.includes(n)) return false; }
        for(let n of exclude){ if(arr.includes(n)) return false; }
        for(let band of bands){
            let cnt=arr.filter(x=>x>=band.start && x<=band.end).length;
            if(cnt < band.count) return false;
        }
        return true;
    }

    let pool=[];
    for(let i=1;i<=45;i++){
        if(!exclude.includes(i)) pool.push(i);
    }

    let outputHTML="";

    for(let line=0; line<lineCount; line++){

        let result=new Set(include);
        let attempt=0;

        while(result.size < 6 && attempt < 5000){

            let temp=new Set(result);

            while(temp.size < 6){
                let idx=Math.floor(Math.random()*pool.length);
                temp.add(pool[idx]);
            }

            let arr=[...temp];

            if(rare){
                let sum=arr.reduce((a,b)=>a+b,0);
                if(sum < 110) { attempt++; continue; }
            }

            if(validate(arr)){
                result=temp;
                break;
            }

            attempt++;
        }

        let numbers=[...result].slice(0,6).sort((a,b)=>a-b);

        let ballsHTML=numbers.map(n=>
            `<span class="ball ${getColorClass(n)}">${n}</span>`
        ).join("");

        outputHTML+=`<div>${ballsHTML}</div>`;
    }

    document.getElementById("result").innerHTML=outputHTML;
}

</script>
<script>
if('serviceWorker' in navigator){
    window.addEventListener('load',()=>{
        navigator.serviceWorker.register('/service-worker.js')
        .then(()=>{
            console.log("SW ë“±ë¡ ì„±ê³µ");
        })
        .catch(err=>{
            console.log("SW ë“±ë¡ ì‹¤íŒ¨",err);
        });
    });
}
</script>
</body>
</html>
